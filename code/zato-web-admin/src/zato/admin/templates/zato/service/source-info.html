{% extends "zato/index.html" %}

{% block html_title %}{{ service.name }} - Source{% endblock %}

{% block "content" %}

<style type="text/css" media="screen">

    .container {
        display: grid;
        grid-template-rows: 120px 120px;
        grid-template-columns: 3.9fr 1fr 0.06fr;
        align-items: stretch;
        height: 87vh;
    }

    #editor {
        height: 87vh;
        border-right: 1px solid #ddd;
        border-bottom: 1px solid #ddd;
    }

    #left-action-area {
        height: 87vh;
        background-color: #fff;
    }

    #left-side-menu {
        height: 87vh;
        background-color:#dfdfdf;
        border-left: 1px solid #bbb;
    }

    .editor-main-side-menu img {
        width: 30px;
        padding: 15px;
        opacity: 35%;
    }

    .editor-main-side-menu img:hover {
        opacity: 100%;
    }

    .editor-main-side-menu a {
        padding: 0px;
    }

    .editor-main-side-menu a:hover {
        background-color: #dfdfdf;
    }

</style>

<div class="container">
    <div class="item">
        <div id="editor">
            if __name__ == '__main__':

                env_key_name = 'ZATO_SERVER_BASE_DIR'
                env_server_base_dir = os.environ.get(env_key_name)

                if env_server_base_dir:


                    server_base_dir = env_server_base_dir
                    cmd_line_options = {
                        'fg':True,
                        'sync_internal':True,
                        'secret_key':'',
                        'stderr_path':None,
                    }
                else:
                    server_base_dir = sys.argv[1]
                    cmd_line_options = sys.argv[2]
                    cmd_line_options = parse_cmd_line_options(cmd_line_options)

                if not os.path.isabs(server_base_dir):
                    server_base_dir = os.path.abspath(os.path.join(os.getcwd(), server_base_dir))

                run(server_base_dir, options=cmd_line_options)
        </div>
    </div>
    <div class="item item-2">22</div>
    <div id="left-side-menu" class="item">

        <ul class="editor-main-side-menu">
            <li>
                <a href="#">
                    <img src="/static/gfx/editor/files.png" title="Browse files on server" />
                </a>
            </li>
            <li>
                <a href="#">
                    <img src="/static/gfx/editor/play.png" title="Invoke the current service" />
                </a>
            </li>
            <li>
                <a href="#">
                    <img src="/static/gfx/editor/info.png" title="Details of the current service" />
                </a>
            </li>
        </ul>

    </div>
  </div>

<script src="/static/ace-builds/src/ace.js" type="text/javascript" charset="utf-8"></script>
<script src="/static/ace-builds/src/ext-error_marker.js" type="text/javascript" charset="utf-8"></script>
<script src="/static/ace-builds/src/ext-language_tools.js" type="text/javascript" charset="utf-8"></script>
<script>
    var editor = ace.edit("editor");
    editor.setTheme("ace/theme/sqlserver");
    editor.session.setMode("ace/mode/python");

    editor.setOptions({
        enableBasicAutocompletion: true,
        enableSnippets: true,
        enableLiveAutocompletion: true,
        newLineMode: "unix",
        fontSize: 17,
        cursorStyle: "ace"
    });

</script>


{% endblock %}
